# UC-001-Count 저장

## 개요

### Use Case ID
UC-001

### 제목
Count 저장

### 설명
외부 서비스가 Count 값을 저장하거나 증가/감소시킵니다. Count 데이터를 생성하거나 기존 Count 값을 변경하는 기능을 포함합니다.

## 액터

### Primary Actor
외부 서비스
- **역할**: Count 값을 생성하거나 변경하는 마이크로서비스 또는 애플리케이션
- **설명**: REST API를 통해 Count 값을 저장하거나 증가/감소시키는 외부 서비스

### Secondary Actor
없음

## 사전조건

- 외부 서비스가 시스템에 인증되어 있어야 함
- 외부 서비스가 유효한 API 키 또는 인증 토큰을 보유하고 있어야 함
- 시스템이 정상적으로 동작 중이어야 함

## 사후조건

- Count 값이 시스템에 저장되거나 업데이트됨
- Count 값의 일관성이 보장됨
- 저장된 Count 값이 조회 가능한 상태가 됨

## 주요 시나리오

1. 외부 서비스가 시스템의 REST API를 통해 Count 저장 요청을 전송한다. (Count ID, 증가/감소 값 또는 새로운 Count 값 포함)
2. 시스템은 요청을 검증한다. (인증 정보, 요청 형식, 필수 필드 등)
3. 시스템은 Count ID에 해당하는 기존 Count 데이터를 조회한다.
4. 시스템은 Count 값을 저장하거나 업데이트한다. (기존 Count 값 증가/감소)
5. 시스템은 업데이트된 Count 값을 저장한다.
6. 시스템은 외부 서비스에게 저장 결과를 반환한다. (성공 여부, 업데이트된 Count 값 등)

## 대안 시나리오

### 4a. Count 값 증가
요청이 Count 값 증가인 경우

4a.1. 시스템은 기존 Count 값에 증가 값을 더한다.
4a.2. 시스템은 5번 단계로 진행한다.

### 4b. Count 값 감소
요청이 Count 값 감소인 경우

4b.1. 시스템은 기존 Count 값에서 감소 값을 뺀다.
4b.2. 시스템은 5번 단계로 진행한다.

### 4c. Count 값 설정
요청이 Count 값을 특정 값으로 설정하는 경우

4c.1. 시스템은 Count 값을 요청된 값으로 설정한다.
4c.2. 시스템은 5번 단계로 진행한다.

## 예외 시나리오

### E1. 인증 실패
외부 서비스의 인증 정보가 유효하지 않은 경우

E1.1. 시스템은 인증 오류를 반환한다.
E1.2. 시스템은 요청을 처리하지 않고 종료한다.

### E2. Count ID 없음
요청된 Count ID에 해당하는 Count 데이터가 존재하지 않는 경우

E2.1. 시스템은 Count를 찾을 수 없다는 오류를 반환한다.
E2.2. 시스템은 요청을 처리하지 않고 종료한다.

### E3. 요청 형식 오류
요청 데이터의 형식이 올바르지 않거나 필수 필드가 누락된 경우

E3.1. 시스템은 요청 형식 오류를 반환한다.
E3.2. 시스템은 요청을 처리하지 않고 종료한다.

### E4. Count 값 유효성 검증 실패
Count 값이 허용 범위를 벗어나거나 유효하지 않은 경우

E4.1. 시스템은 유효성 검증 오류를 반환한다.
E4.2. 시스템은 요청을 처리하지 않고 종료한다.

### E5. 시스템 오류
시스템 내부 오류가 발생한 경우

E5.1. 시스템은 내부 오류를 기록한다.
E5.2. 시스템은 외부 서비스에게 시스템 오류를 반환한다.

## 관련 Use Case

- **UC-002-Count 조회**: 저장된 Count 값을 조회하는 Use Case
- **UC-003-Count 관리**: 관리자가 Count 데이터를 관리하는 Use Case
