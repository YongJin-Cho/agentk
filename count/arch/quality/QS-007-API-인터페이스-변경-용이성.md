# QS-007-API-인터페이스-변경-용이성

## 개요

### Quality Scenario ID
QS-007

### 제목
API 인터페이스 변경 용이성

### 설명
API 인터페이스 방식(예: REST → gRPC, REST → GraphQL)을 변경할 때 영향받는 모듈의 범위

### 품질 속성
변경 용이성 (인터페이스 변경)

## 환경

### 시스템 상태
- 시스템이 개발 및 유지보수 단계에 있음
- Count 통합 관리 시스템이 Kubernetes 환경에서 MSA로 배포되어 있음
- 기존 API 인터페이스 방식(예: REST)이 구현되어 있음

### 초기 조건
- API 인터페이스 방식 변경 요구사항이 있음
- 변경 유형: REST → gRPC, REST → GraphQL, gRPC → REST 등 인터페이스 프로토콜/방식 변경
- 기존 API를 사용하는 외부 서비스가 존재할 수 있음
- 관련 컴포넌트 코드가 존재함

### 부하 조건
- 변경 작업이 진행되는 개발 환경
- 변경 영향도를 분석하기 위한 코드베이스 분석이 수행됨

### 관련 컴포넌트
- CountAPI (Boundary)
- CountWriter (Control)
- CountReader (Control)
- 외부 서비스 (API 사용자)

## 동작

1. API 인터페이스 방식 변경 요구사항 발생
   - 예: REST API → gRPC로 변경
   - 예: REST API → GraphQL로 변경
   - 예: gRPC → REST API로 변경
2. 변경 영향도 분석 수행
   - 변경되는 API 인터페이스 방식 식별
   - 해당 API를 구현하는 모듈 식별 (CountAPI)
   - 해당 API를 사용하는 외부 서비스 식별
   - 인터페이스 방식 변경으로 인해 수정이 필요한 모듈 식별
   - 인터페이스 프로토콜 처리 로직이 있는 모듈 식별
3. 변경 작업 수행
   - CountAPI 모듈의 인터페이스 프로토콜 처리 로직 수정 또는 교체
   - 관련 Control 컴포넌트(CountWriter, CountReader) 수정 (필요한 경우)
   - 데이터 직렬화/역직렬화 로직 수정 (필요한 경우)
   - 외부 서비스 코드 수정 (필요한 경우)
   - 테스트 코드 수정
   - 문서 업데이트
4. 변경 작업 완료 및 배포

## 측정

### 측정 항목
API 인터페이스 방식 변경 시 영향받는 모듈의 크기

### 측정 공식
```
변경 비용 = Σ(LOC(변경되는 모듈)) + Σ(LOC(변경되는 모듈을 의존하는 모듈))
```

여기서:
- `LOC(변경되는 모듈)`: 인터페이스 방식 변경으로 인해 직접 수정되는 모듈의 코드 라인 수(Lines of Code)
- `LOC(변경되는 모듈을 의존하는 모듈)`: 변경되는 모듈을 의존하는 모든 모듈의 코드 라인 수(Lines of Code)

### 측정 방법
- API 인터페이스 방식 변경 시 변경되는 모듈을 식별 (예: CountAPI)
- 변경되는 모듈을 의존하는 모든 모듈을 의존성 그래프를 통해 식별
- 변경되는 모듈의 전체 코드 라인 수를 측정
- 변경되는 모듈을 의존하는 각 모듈의 전체 코드 라인 수를 측정
- 변경 비용은 변경되는 모듈의 크기와 의존하는 모듈들의 크기의 합으로 표현
- 측정은 변경 전후 인터페이스 방식(REST/gRPC/GraphQL), 변경 범위에 따라 달라질 수 있음을 고려

## 관련 문서

- UC-001-Count 저장
- UC-002-Count 조회
